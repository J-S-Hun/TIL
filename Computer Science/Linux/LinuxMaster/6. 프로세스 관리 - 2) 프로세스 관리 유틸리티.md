### 날짜: 2023-01-31 14:43

### 주제: 프로세스 명령어 세부사항 확인 필요
---
### 메모: 
#### 프로세스 관련 명령어
##### ps
- 현재 실행 중인 프로세스의 상태를 출력하는 명령어이다.
- 기본 형식
	- a 
		- 로그인 셸과 터미널에 종속되지 않은 모든 프로세스 출력
	- e
		- 커널 프로세스를 제외한 모든 프로세스 출력 
	- **f**
		- **풀 포맷으로 출력** 
		- **프로세스 간 상관관계를 트리 구조로 나타낼 때 사용하는 옵션**
	- l
		- 자세한 프로세스 목록 출력 
	- o
		- 출력 포맷을 지정 (pid, tty, time, command 등)
	- p
		- 특정 PID를 지정
	- r
		- 현재 실행 중인 프로세스 출력
	- u
		- **특정 사용자의 프로세스를 확인할 때 사용(사용자를 지정하지 않으면 현재 사용자 기준)**
	- x
		- **접속된 터미널뿐만 아니라 사용 중인 모든 프로세스 출력** 
		- 동작 중인 데몬을 확인할 때 
- **특정 프로세스 'sshd'를 확인**
	- <code>ps aux | grep sshd</code>
- **모든 프로세스를 풀 포맷으로 출력**
	- <code>ps aux</code>
- **프로세스 상태**
	- D
		- 입출력 작업이 끝나기를 기다리는 정지 상태
	- P
		- 수행 가능, 수행 중인 상태
	- R
		- 현재 실행 상태
	- S
		- 잠든 상태
	- T
		- 정지 상태(suspend), 일시 정지 상태
	- Z
		- 좀비(zombie) 프로세스, 작업 종류 후 부모 프로세스로부터 회수되지 않아 아직 메모리에 적재되어 있는 상태
##### pstree 
- 실행 중인 프로세스를 트리 구조로 출력하는 명령어이다.
- 옵션
	- a
		- 모든 프로세스 식별자 출력
	- c
		- 중복된 프로세스도 모두 출력 
	- G
		- 'VT100' 형태의 트리 구조로 출력 
	- h
		- 해당 프로세스와 프로세스의 부모 프로세스를 음영으로 강조하여 출력 
	- H
		- 지정한 PID의 프로세스와 부모 프로세스를 음영으로 강조하여 출력
	- l
		- 긴 행으로 모든 정보 출력 
	- n
		- 프로세스 식별자를 기준으로 정렬하여 출력 
	- p
		- 프로세스 식별자도 출력
	- u
		- 사용자 식별자도 출력
	- U
		- 'UTF-8(유니코드)' 형태로 출력 
##### top
- **프로세스 상태를 실시간으로 확인하거나, 모니터링하는 명령어**
- 시스템의 상태(CPU, Memory, Process)를 전반적으로 빠르게 파악할 수 있다. 
- 옵션 없이 입력하면 'Interval' 간격(기본 3초)으로 화면을 갱신하여 정보를 출력한다. 
- 옵션(실행 전)
	- b
		- 순간의 정보 확인(Batch 모드)
	- d
		- 실시간 화면 출력 'Interval' 시간 지정(단위: 초)
	- n
		- 실행 주기 지정(반복 횟수)
	- p
		- 모니터링할 프로세스 식별자(PID) 지정
- 옵션(실행 후)
	- a
		- 메모리 사용량을 기준으로 정렬
	- b
		- 배치 모드로 작동
	- 1
		- CPU 코어별로 사용량 출력
	- f
		- Sort 필드 선택 화면 -> q 키 누르면 'RES' 를 기준으로 정렬
	- q
		- 실행 종료
	- Shift + m
		- 메모리 사용량 기준으로 정렬 (내림)
	- Shift + p 
		- CPU 사용량 기준으로 정렬 (내림)
	- Shift + t 
		- 프로레스의 사용 시간을 기준으로 출력
##### nohup
- 프로세스를 중단하지 않고, 백그라운드 작업을 수행할 수 있게 하는 명령어
- 사용자가 터미널을 종료해도 프로세스는 백그라운드로 계속 실행한다. 
- 'nohup' 명령어로 프로그램을 실행시키면 'nohup.log'라는 로그 파일을 생성한다.
- 기본 형식
	- nohup (실행 파일) &
- 로그 안 남기기
	- nohup (실행 파일) 1>/dev/null 2>&1 &
- 종료 하기 
	~~~ shell
	ps -aux | grep [실행 파일]
	kill -9 [PID]
	~~~
##### jobs
- 백그라운드로 실행 중인 프로세스를 확인하는 명령어
- 옵션 
	- l 
		- 프로세스 그룹 ID를 state 필드 앞에 출력
	- n
		- 프로세스 그룹 중에 대표 프로세스 ID를 출력 
	- p
		- 각 프로세스 ID에 대해 한 행씩 출력 
- 활용
	~~~ shell 
		[root@localhost ~]# jobs
		[1]- Stopped vi 
		[2]+ Stopped top
		// [1] 작업번호
		// - 앞으로 실행 될 작업
		// Stopped 작업 일시 중단 
		// vi 실행 작업
	~~~
- 작업 상태
	- Running 
		- 작업이 일시 중단되지 않았고, 종료하지 않고 계속 진행 중 
	- Stopped 
		- 작업 일시 중단
	- Done 
		- *작업이 완료되어 '0'을 반환하고 종료*
	- Done(code)
		- *작업이 정상적으로 완료되었으나, '0'이 아닌 코드를 반환했음*
##### fg, bg
- 프로그램을 foreground와 background로 실행하는 명령어이다. 
- 포그라운드에서 백그라운드 작업으로 전환할 수 있다. 
	- 실행 중인 작업을 일시 중지(Ctrl + Z)하고, 'bg' 명령을 실행한다. 
	- 프로그램을 백그라운드로 실행하고자 하면 명령어 뒤에 '&'를 붙이면 된다. 
	- **fg 명령에 작업번호를 지정하지 않고 실행하면 현재 작업이 실행된다.**
- 백그라운드에서 포그라운드로 작업을 전환할 수 있다. 
	- 'fg' 명령을 실행하여 포그라운드 작업으로 전환할 수 있다. 
	- 포그라운드 작업을 종료하러면 Ctrl + C 입력한다. 
- 기본 형식
	- fg %(작업 번호), bg %(작업 번호)
##### nice
- 실행할 프로그램의 우선순위를 지정하고, 우선순위 설정값을 확인하는 명령어 
- 'nice' 값을 지정하여 프로세스의 우선순위를 부여한다.
- **기본 'nice' 값은 보통 0, 조정 범위는 -20 ~ 19까지 가능하며, 수치가 낮을수록 우선순위가 높다.** 
- **일반 사용자는 'nice' 값을 증가만 할 수 있다.**
##### renice
- 이미 실행 중인 프로세스의 우선순위를 변경하는 명령어이다. 
- 기본의 nice 값과 상관없이 지정한 nice 값을 바로 적용한다. 
- **root 사용자와 해당 프로세스 소유자만이 변경 가능하다.** 
- **일반 사용자는 nice 값을 증가만 할 수 있다.** 
##### kill 
- 프로세스에 특정한 시그널을 보내는 명령어이다. 
- **일반적으로 종료되지 않은 프로세스를 종료할 경우에 많이 사용한다.**
- 옵션
	- **l**
		- **Signal의 종류를 출력** 
			- 특정 프로세스가 다른 프로세스에게 메세지를 보낼 때 이용하는 것
	- s
		- 특정 Signal 지정(Signal 번호나 Signal 명으로 지정)
	- - 1
		- 프로세스 재시작
	- - 9
		- 프로세스 강제 종료
	- - 15
		- 프로세스 정상 종료
##### killall
- **프로세스 번호가 아닌 프로세스 명으로 종료시키는 명령어이다.**
- **여러 프로세스를 한 번에 종료시키고자 할 때 사용하는 명령어이다.**
- 옵션
	- i
		- 종료 전 확인
	- I(i)
		- 프로세스 명에 대소문자 구별하지 않음
	- g
		- 프로세스 그룹 종료
	- o
		- 지정 시간 이후 프로세스 종료
	- **l**
		- **모든 시그널명 출력**
	- s
		- 'SIGTERM' 대신 해당 시그널로 전송
	- u
		- 해당 사용자로 실행된 프로세스만 종료
	- v
		- 시그널이 성공적으로 전송될 경우 출력
	- w
		- 프로세스가 종료될 때까지 대기
#### 작업 스케줄링 
##### cron
- **주기적으로 반복되는 작업을 자동적으로 실행하는 프로그램이다.** 
- **데몬은 'crond'이며, 관련 파일은 '/etc/crontab'이다.**
- 데몬 
	- **리눅스 시스템이 처음 가동될 때, 실행되는 백그라운드 프로세스의 일종으로 사용자의 요청을 기다리고 있다가 요청을 하면 이에 적절한 서비스를 제공하는 프로세스를 말한다.** 
	- 멀티태스킹 운영체제에서 사용자가 직접 제어하지 않고, 백그라운드에서 실행되면서 여러 작업을 하는 프로그램을 말한다.
- 활용 
	- /home/cron.sh 파일을 일요일 오전 2시 30분에 실행
	- 30 2 * * 0 /home/cron.sh
- 분, 시, 일, 월, 요일 실행 명령어
#### 기출문제 정리
14. 유닉스 환경에서 프로세스 간 통신의 고전적인 방법 : **파이프** 
	 - 디렉터리: 파일을 보관하는 저장소
	 - 루틴: 프로세스의 동작 절차를 의미 
	 - 인터럽트: 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우 현재 실행중인 작업을 중단하고 발생된 상황을 처리한 후 다시 실행 중인 작업으로 복귀하는 것을 말한다.
37. 'ihduser' 사용자의 모든 프로세스를 강제 종료하는 명령 
		killall -9 -u ihduser 

### 출처(참고문헌) 
- 한권으로 끝내기 리눅스 마스터 2급

### 연결문서 
- [[6. 프로세스 관리 - 1) 프로세스의 개념 및 유형]]

### Tag
- #CS/Linux 
- #LinuxMaster 