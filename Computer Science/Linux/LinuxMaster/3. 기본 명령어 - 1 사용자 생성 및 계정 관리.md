### 날짜: 2023-01-14 00:29

### 주제: 사용자 관리 명령어 중 옵션 숙지 필요
---
### 메모: 
##### 사용자 관련 명령어
###### useradd 
- 사용자 계정 생성 명령어 
- 생성된 사용자 **계정 정보는 '/etc/passwd', '/etc/shadow', '/etc/group' 파일**에 저장된다.
- 옵션
	- -c 사용자 계정 설명 추가 
	- -d 사용자 계정 홈 디렉터리 지정 
	- **-e 사용자 계정의 유효 기간 설정** 
	- **-f 패스워드가 만료된 후 계정의 만료 날짜 지정** 
	- -G 사용자 계정의 새로운 그룹 추가 
	- -s 사용자 계정의 로그인 기본 셸 지정 
###### passwd
- 사용자 계정의 패스워드 변경 및 관리하는 명령어
- 생성된 패스워드의 정보는 암호화되어 **'/etc/shadow'** 파일에 저장된다.
- 옵션
	- -d 사용자 계정의 패스워드 삭제 
	- **-l 사용자 계정 잠금** (lock)
	- -S 계정 상태 출력
		- PS 정상
		- NP 패스워드가 설정 안됨 
		- LK 잠금이거나 NP 상태
	- **-u 사용자 계정 잠금 해제** (unlock)
######  su
- Switch User(또는 Substitute User)의 약어로 현재 사용자 계정에서 로그아웃 하지 않고, 다른 사용자로 전환하는 명령어이다. 
- 옵션
	- **-, -l, --login 사용자의 환경변수를 적용하여 로그인** 
	- -c 셸을 실행하지 않고 주어진 명령어 실행 
	- -s 지정된 셸로 로그인
##### 사용자 관련 파일 
###### /etc/default/useradd 파일
- **사용자 계정 생성 시 가장 먼저 참조하는 파일**
- 'vi' 편집기 또는 'useradd -D' 명령어로 확인 및 변경이 가능하다. 
###### /etc/login.defs 파일
- **새로 사용자 계정 생성 시 두 번째로 참조하는 파일로 기본값을 정의하는 파일** 
###### /etc/skel 디렉터리
- '/etc/default/useradd' 파일에서 'SKEL'의 값은 '/etc/skel' 디렉터리를 의미한다.
- **새로 사용자 계정 생성 시 추가되는 홈 디렉터리에 복사할 파일들이 있는 디렉터리 경로** 
- 디랙터리 파일 설명
	- **.bash_logout**
		- 사용자가 로그아웃하기 바로 직전에 실행하는 프로그램에 관한 배시(Bash)의 지역적인 시스템 설정과 관련된 파일 
	- **.bash_profile**
		- 환경변수와 배시가 수행될 때 실행되는 **프로그램을 제어**하는 지역적인 시스템 설정과 관련된 파일 
	- **.bashrc**
		- 별칭(alias)과 배시가 수행될 때 실행되는 **함수를 제어**하는 지역적인 시스템 설정과 관련된 파일
###### /etc/passwd 파일
- **사용자 계정 정보를 저장하고 있는 파일로 로그인 시 사용한다.**
- 사용자 계정의 UID, GID, 홈 디렉터리 등을 저장하고 있는 파일
- 7개의 필드로 구성되어 있으며, ':'으로 구분한다. 
	- *계정명, 패스워드, UID, GID, 설명, 홈 디렉터리, 로그인 셸 종류*
###### /etc/shadow 파일 
- **사용자의 패스워드가 저장되어 있는 파일이다.**
- 사용자의 패스워드가 암호화되어 저장되며 사용자 계정의 유효기간, 만료일 등을 저장하고 있는 파일이다. 
- 9개의 필드로 구성되어 있으며, ':'으로 구분한다.
	- *계정명, 암호화된 패스워드, 변경 후 지난 일 수, 변경 최소 일, 최대 유효기간, 만료 경고일, 만료 후 비활성화 기간, 계정 만료일, 예약*
##### 사용자 계정 관리
###### usermod
- 사용자 계정 정보를 변경하는 명령어 
- 사용자의 계정명, UID, GID, 홈 디렉터리 등을 변경하는 명령어 
- 옵션
	- -c 설명 변경 
	- -d 사용자 홈 디렉터리 변경 
	- **-e 계정 만료일 변경** 
	- **-f 사용자 계정 유효일 지정** 
	- -g GID 변경 
	- -G 지정한 그룹에 사용자 추가 
	- **-s 로그인 시 사용할 기본 셸 지정** 
	- -u UID 변경 
###### userdel
- 사용자 계정 정보를 삭제하는 명령어 
- 옵션 지정 없이 해당 명령어를 실행하면 '/etc/passwd', '/etc/shadow', '/etc/group' 파일의 사용자 계정 정보가 삭제된다. 
- -r 
	- 위 경로들과 '/var/spool/mail/계정 파일'과 홈 디렉터리의 모든 내용을 삭제 
##### 사용자 정보 조회 명령어
###### users
- 시스템에 로그인한 사용자의 정보를 출력하는 명령어 
###### w
- 시스템에 로그인한 사용자의 정보를 자세히 출력하는 명령어 
###### who 
- 시스템에 로그인한 사용자의 정보를 간단히 출력하는 명령어 
###### whoami
- 시스템에 로그인한 사용자를 출력하는 명령어 
###### id
- **시스템에 로그인한 사용자의 UID, GID, GROUP 정보를 출력하는 명령어이다.** 



### 출처(참고문헌) 
- 한 권으로 끝내기 리눅스 마스터 2급 

### 연결문서 
- [[3. 기본 명령어 - 2 그룹 생성 및 그룹 관리]]
- [[3. 기본 명령어 - 3 디렉터리 및 파일]]
- [[3. 기본 명령어 - 4 기타 명령어]]

### Tag
- #CS/Linux 
- #LinuxMaster 