### 날짜: 2023-01-16 15:25

### 주제: 파일 시스템 이론 숙지 필요 
---
### 메모: 
#### 파일 시스템 구조 
- **파일 시스템은 시스템에서 파일이나 자료를 쉽게 검색하고, 접근, 유지, 관리하기 위한 조직체계이다.** 즉, 저장매체에는 많은 파일이 있으므로, 이러한 파일을 관리하는 방법을 의미한다. 
- 계층적 구조를 가지며, 디스크 파티션별로 하나씩 존재하고, 하드디스크나 CD-ROM과 같은 물리적 저장소를 관리한다. 
![[스크린샷 2023-01-21 11.58.19.png|500]]
- Super Block 
	- *파일 시스템 관련 정보 저장* 
	- 블록의 개수, 블록 그룹 개수, 아이노드 개수 저장
- Group Description Table 
	- *모든 블록 그룹 관련 정보 저장* 
		- *블록 비트맵과 아이노드 비트맵의 블록 번호* 
		- 첫 번째 아이노드 테이블 블록의 블록 번호 
		- *빈 블록 수, 빈 디렉터리 수, 아이노드 수* 
- Block/I-Node Bitmap
	- *블록/아이노드 사용 현황을 Bit를 활용하여 Map 형태로 나타낸 것* 
- I-Node Table
	- *아이노드와 관련된 정보를 테이블 형태로 나타낸 것* 
##### 종류 
- **ext**
	- 리눅스 초기 파일 시스템으로, 호환성이 없음 
	- 파일 접근에 대한 타임 스탬프, 아이노드 수정 불가 
- **ext2**
	- 부트 섹터(Boot Sector)와 블록 그룹(Block Group)으로 구성(Block Group은 파일)
	- *파일 시스템 테이블을 정의하기 위하여 시스템 내의 각 파일을 아이노드 자료구조로 표현하며, 모든 정보를 'Super Block'과 'Group Descriptor Table'에 저장* 
	- *파일에 들어 있는 데이터는 데이터 블록에 저장되며, 데이터 블록의 크기는 같음* 
	- 'ext2' 파일 시스템의 크기는 'mke2fs' 명령을 통하여 파일 시스템이 만들어질 때 결정 
	- 파일 시스템이 손상되었을 때, 'fsck(File System Check)'를 이용하여 데이터를 복원할 수 있으나, 캐시에 저장된 데이터를 하드디스크에 저장하는 동안 시스템의 다운 등의 문제 발생 시 파일 시스템이 손상됨 
- **ext3** 
	- 커널 2.4 버전부터 지원 
	- 사용자가 직접 데이터 보호 유형과 보호 수준 결정 가능 
	- *'etx2' 파일 시스템의 검사 시 또는 복구 시 시간이 오래 걸리거나 시스템을 사용하지 못하는 단점을 보완하기 위하여 저널링 기능 추가* 
		- 데이터의 신뢰성과 작업 능률을 향상시킬 수 있음 
		- *저널링: 스토리지에 데이터를 저장하기 전에 Journal 영역에 데이터의 변경 이력을 저장하고, 스토리지에 데이터 변경 내역을 저장하는 활동*
- **ext4**
	- 64비트 기억공간의 제한을 없애고, ext3 파일 시스템보다 성능을 향상시켰으며, 호환성이 있는 확장 버전 
	- 1EB(Exabyte) 이상의 볼륨과 16TB 이상의 파일 지원 
	- 지연된 할당(Allocate on Flush) 파일 시스템 기능 지원 
	- *실제 파일 크기에 기반하여 블록 할당을 결정하고, 향상된 블록 할당이 가능하므로 단편화를 줄이고, 성능을 향상시킴*
##### 기타 파일 시스템
###### 저널링 파일 시스템 
- JFS(Journaling File System)
	- IBM사의 독자적인 저널링 파일 시스템
- XFS(Extended FIle System) 
	- 높은 확장성과 처리량
- ReiserFS
	- 가장 안정적인 저널링 파일 시스템 
	- 모든 파일을 B-Tree에 저장하고, 간결한 디렉터리 지원 
###### 네트워크 파일 시스템 
- SMB(Server Message Block)
	- 'SAMBA' 파일 시스템으로 사용 
	- 리눅스와 윈도 운영체제 간 자료 및 하드웨어 공유 프로토콜 
- CIFS(Common Internet File System) 
	- SMB 확장 파일 시스템 
	- 네트워크에서 자료를 주고받게 해주는 프로토콜 
- NFS(Network FIle System)
	- 썬 마이크로시스템이 개발한 네트워크 공유 프로토콜 
	- 서로 다른 운영체제 간 파일/디렉터리 공유 가능 
###### 기타 파일 시스템 
- ISO9660 
	- CD-ROM 표준 파일 시스템 
- UDF 
	- 공학 저장 기술협회(OSTA)에 의해 개발 
	- 광학 매체용 표준 파일 시스템 
	- 대부분 DVD에서 사용 
- HPFS 
		- MS사와 IBM이 공동 개발 
		- OS/2 운영체제용 파일 시스템
#### 파일 시스템 관련 명령어 
##### fdisk
- 파티션을 생성, 수정, 제거 및 파일 시스템의 유형을 지정하는 명령어이다. 
- 옵션
	- -l 현재 파일 시스템과 파티션 정보 출력
	- -s 지정된 파일 시스템의 크기를 블록 단위로 출력 
##### mkfs 
- 파일 시스템을 생성하는 명령어이다. 
- 옵션 
	- -c 파일 시스템 불량 블록 검사 
	- -t 파일 시스템의 유형 지정
	- -v 작업 과정 출력
##### mke2fs 
- 'mkfs' 명령어의 확장 버전으로 파일 시스템을 생성하는 명령어이다. 
- 옵션
	- -b 블록 크기 지정
	- -c 불량 블록 검사 
	- -f 플래그먼트 크기 지정
	- -i 아이노드 크기 지정
	- -j 'ext3' 파일 시스템 이상에서 저널링 기술 적용하여 생성
	- -S 슈퍼 블록 복구 시사용
	- -t 파일 시스템 유형 지정 
##### mkfs.xfs
- xfs 파일 시스템을 생성하는 명령어이다. 
##### fsck 
- 파일 시스템의 무결성 점검과 오류를 복구하는 명령어이다. 
- 'lost+found' 디렉터리에 저장된 파일을 복구하며, 복구가 완료되면 파일은 제거된다. 
##### e2fsck
- 'fsck' 명령어의 확장 버전이다. 
- 파일 시스템의 무결성 점검과 오류를 복구하는 명령어이다. 
##### xfs_repair 
- xfs 파일 시스템을 검사 및 복구하는 명령어이다. 
##### mount, umount
- 특정 장치와 디렉터리를 연결하는 명령어이다. 
- 기본적으로 주변 장치는 자동으로 마운트되지 않으므로, 시스템 부팅 후 수동으로 마운트하여 사용하고, 사용 완료 후에는 언마운트하여 연결을 종료해야 한다. 
- **하드웨어장치를 리눅스에서 사용하기 위해 인식시켜주는 명령어**
- 옵션
	- -a 'fstab' 파일에 있는 모든 파일 시스템 마운트 
	- -f 실제로 마운트하지 않고, 마운트를 할 수 있는지 확인 
	- -n /etc/mtab 파일에 쓰기 작업을 하지 않고 마운트
	- -o 추가 옵션
	- -r 읽기 전용 마운트
	- -t 파일 시스템 유형 지정
	- -w 읽기/쓰기 모드로 마운트
##### eject 
- DVD나 CD-ROM 등의 미디어 장치를 해제하고, 꺼내는 명령어이다. 
##### df 
- 시스템에 마운트된 하드디스크의 사용량과 남은 용량을 확인하는 명령어이다. 
#### 파일 시스템 관련 파일 
##### /etc/fstab
- **파일 시스템 관련 설정 정보를 저장하고 있는 파일이다.** 
- **시스템 부팅 시 파일 시스템을 자동으로 마운트 하고자 할 때, 이 파일을 설정하면 된다.** 

### 출처(참고문헌) 
- 한 권으로 끝내기 리눅스 마스터 2급 

### 연결문서 
- [[4. 파일 시스템 관리 - 1) 사용자 권한 및 그룹 설정 (x)]]
- [[1. I-Node란?]]

### Tag
- #CS/Linux 
- #LinuxMaster 