### 날짜: 2023-07-20 12:43

### 주제: 스레드 동기화 메커니즘
---
### 메모: 
- "모니터"와 "세마포어"는 동시성 제어를 위한 두 가지 주요 동기화 기법이다. 
- 이 두 가지 기법은 동시에 여러 스레드 또는 프로스세가 공유 자원에 접근하는 것을 제어하는 데 사용되지만, 사용 방식과 기능에는 몇 가지 중요한 차이점이 있다. 
#### Monitor 
- 상호 배제 락(Mutual exclusion lock)로 보호되는 루틴의 집합을 모니터라고 부른다. 스레드는 자물쇠를 획득하기 전까지 모니터에 속하는 루틴을 하나도 실행할 수 없다. 즉, 한 모니터 내에서는 한 스레드씩 실행된다. 
- 모니터는 공유 자원에 대한 접근을 동기화하는데 사용되는 고급 동기화 기법이고 추상 데이터 타입이다. 
- 공유 자원과 그 자원에 대한 연산을 캡슐화한다. 
- 모니터는 'condition variables'(조건 변수)라는 개념을 사용하여 스레드 간의 통신을 제공한다. 이 변수들은 'wait'와 'signal' 연산을 통해 동작하며, 스레드가 특정 조건이 충족될 때까지 대기하거나 다른 스레드에게 특정 조건이 충족되었음을 알리는 데 사용된다. 
#### Semaphore 
- *세마포어는 더 간단하다. 공유 자원을 보호하기 위한 자물쇠만 있을 뿐이다. 스레드에서 공유 자원을 사용하려면 자물쇠를 획득해야 한다. 자물쇠를 쥐고 있는 스레드에서 놓아주기 전까지는 그 자원을 획득하려는 다른 스레드는 막히게 되고, 자물쇠를 놓아주는 순간 기다리고 있던 스레드가 그 자물쇠를 획득한다.* 
- 이렇게 가장 기본적인 방식의 세마포어를 **상호 배제(mutex :mutual exclusion)** 세마포어라고 한다.
- 이 외에도 카운팅 세마포어, 이벤트 세마포어 등 ㅣ있다 .
- 세마포어는 정수 값을 가진 변수로, 두 가지 원자적(atomic)연산, 즉 'wait'와 'signal'을 통해 동작한다. 
	- **wait**
		- 세마포어의 값을 감소시키고, 만약 그 값이 음수가 되면 호출한 프로세스를 차단한다.
	- **signal**
		- 세마포어의 값을 증가시키고, 만약 그 값이 0 이하면 차단된 프로세스 중 하나를 깨운다. 
#### 주요 차이점 
- **디자인** 
	- 세마포어는 저수준 동기화 기법으로, 프로그래머가 직접 'wait'와 'signal' 연산을 관리해야 한다. 반면, 모니터는 고수준 동기화 기법으로, 상호 배제와 조건 동기화를 자동으로 제공한다. 
- **사용의 용이성** 
	- 세마포어는 사용이 복잡하고 오류를 만들기 쉬운 반면, 모니터는 사용이 더 간단하고 안전하다.
- **상호 배제** 
	- 세마포어는 프로그래머가 직접 상호 배제를 구현해야 하지만, 모니터는 자동으로 상호 배제를 제공한다.
- **동기화 메커니즘** 
	- 세마포어는 'wait'와 'signal' 연산을 통한 동기화를 제공한다. 반면, 모니터는 'wait', 'signal', 그리고 'continue' 연산을 통한 동기화를 제공한다. 
- **구조**
	- 세마포어는 단순한 정수 변수이지만, 모니터는 메서드, 변수, 그리고 조건을 포함하는 복잡한 구조이다. 

### 출처(참고문헌) 
- 프로그래밍 면접 이렇게 준비한다 -296p

### 연결문서 
- [[5. Groups & Semaphores]]

### Tag
- #CS/OS/Thread/Monitor
- #CS/OS/Thread/Semaphore